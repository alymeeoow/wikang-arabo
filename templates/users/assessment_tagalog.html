{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Assessment</title>
  <link rel="stylesheet" href="{% static 'css/users/assessment_tagalog.css' %}">
  <link rel="icon" type="image/png" href="{% static 'images/TAlogo.png' %}">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>







{% include 'users/header_assessment.html' %}




<div id="confirmationModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Confirm Action</h2>
           
        </div>
        <div class="modal-body">
            <p id="modalMessage">Are you sure you want to proceed?</p>
            <div class="modal-buttons">
            <button id="confirmButton">Yes</button>
            <button id="cancelButton" onclick="closeConfirmationModal()">No</button>
          </div>
        </div>
    </div>
</div>

<!-- Warning Modal for unanswered questions -->
<div id="warningModal" class="modal">
  <div class="modal-content">
      <div class="modal-header">
          <h2>Answer Required</h2>
          <span class="close" onclick="closeWarningModal()">&times;</span>
      </div>
      <div class="modal-body">
          <p id="warningMessage">Please select an answer before proceeding.</p>
          <div class="button-group">
              <button class="btn btn-primary" onclick="closeWarningModal()">OK</button>
          </div>
      </div>
  </div>
</div>

<div  class="container">
  <form id="assessmentForm" method="POST" action="{% url 'submit_assessment' %}">
    {% csrf_token %}
    <input type="hidden" name="total_questions" value="{{ questions|length }}">
    <div id="question-container">
      {% for question in questions %}
      <div class="question" id="question_{{ forloop.counter }}" style="display: none;">
        <h3>{{ question.question_text }}</h3>
        <ul class="options">
          <li>
            <input type="radio" name="answers_{{ question.id }}" value="{{ question.option_1 }}">
            {{ question.option_1 }}
          </li>
          <li>
            <input type="radio" name="answers_{{ question.id }}" value="{{ question.option_2 }}">
            {{ question.option_2 }}
          </li>
          <li>
            <input type="radio" name="answers_{{ question.id }}" value="{{ question.option_3 }}">
            {{ question.option_3 }}
          </li>
          <li>
            <input type="radio" name="answers_{{ question.id }}" value="{{ question.option_4 }}">
            {{ question.option_4 }}
          </li>
        </ul>
      </div>
      {% endfor %}
    </div>
    <div class="buttons">
      <i class="fas fa-arrow-left arrow" title="Back" onclick="goToPreviousQuestion()"></i>
      <button type="button" style="border: 2px solid black;" onclick="startSpeechRecognition()" class="voice-button">Voice Answer</button>
      <i class="fas fa-arrow-right arrow" title="Next" onclick="goToNextQuestion()"></i>
  </div>
  
  
  
    <button type="submit"style="display: none;" id="submitButton">Submit Test</button>
  </form>
</div>

<div id="voiceModal" class="modal">
  <div class="modal-content">
      <div class="modal-header">
          <h2 id="modalTitle">Speak Now</h2>
          <span class="close" style="margin-top: -40px; margin-right: -15px" onclick="closeModal()">&times;</span>
      </div>
      <div class="modal-body">
          <p id="modalMessage"></p>
          <p id="timeoutMessage" style="display:block; color: red;"></p>
          <button id="retryButton"   style="display:block;" onclick="retrySpeechRecognition()">Try Again</button>
      </div>
  </div>
</div>




<script src="{% static 'js/users/assessment_tagalog.js'%}"></script>
<script src="https://code.responsivevoice.org/responsivevoice.js?key=3H4F782F"></script>

<script>
    function toggleNav() {
  const navbar = document.getElementById('navbar');
  navbar.classList.toggle('show'); 
}

</script>



</body>
</html>
